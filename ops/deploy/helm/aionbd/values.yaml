replicaCount: 1

image:
  repository: ghcr.io/aionbd/aionbd-server
  tag: latest
  pullPolicy: IfNotPresent

service:
  type: ClusterIP
  port: 8080

resources:
  requests:
    cpu: 250m
    memory: 512Mi
  limits:
    cpu: "2"
    memory: 2Gi

persistence:
  enabled: true
  size: 20Gi
  storageClassName: ""

podSecurityContext:
  fsGroup: 1000

securityContext:
  runAsNonRoot: true
  runAsUser: 1000
  allowPrivilegeEscalation: false
  readOnlyRootFilesystem: true

config:
  AIONBD_BIND: "0.0.0.0:8080"
  AIONBD_PERSISTENCE_ENABLED: "true"
  AIONBD_SNAPSHOT_PATH: "/var/lib/aionbd/snapshot.json"
  AIONBD_WAL_PATH: "/var/lib/aionbd/wal.jsonl"
  AIONBD_CHECKPOINT_INTERVAL: "32"
  AIONBD_ASYNC_CHECKPOINTS: "true"
  AIONBD_CHECKPOINT_COMPACT_AFTER: "64"
  AIONBD_WAL_SYNC_ON_WRITE: "true"
  AIONBD_WAL_SYNC_EVERY_N_WRITES: "0"
  AIONBD_WAL_SYNC_INTERVAL_SECONDS: "0"
  AIONBD_WAL_GROUP_COMMIT_MAX_BATCH: "16"
  AIONBD_WAL_GROUP_COMMIT_FLUSH_DELAY_MS: "1"
  AIONBD_MAX_DIMENSION: "4096"
  AIONBD_MAX_POINTS_PER_COLLECTION: "1000000"
  AIONBD_MEMORY_BUDGET_MB: "1024"
  AIONBD_MAX_BODY_BYTES: "1048576"
  AIONBD_MAX_CONCURRENCY: "256"
  AIONBD_REQUEST_TIMEOUT_MS: "2000"
  AIONBD_MAX_PAGE_LIMIT: "1000"
  AIONBD_MAX_TOPK_LIMIT: "1000"
  AIONBD_UPSERT_BATCH_MAX_POINTS: "256"
  AIONBD_SEARCH_BATCH_MAX_QUERIES: "256"

secretEnv: {}
# secretEnv example:
#   AIONBD_AUTH_MODE: api_key
#   AIONBD_AUTH_API_KEYS: tenant-a:super-secret
#   AIONBD_TLS_ENABLED: "true"
#   AIONBD_TLS_CERT_PATH: /etc/aionbd/certs/tls.crt
#   AIONBD_TLS_KEY_PATH: /etc/aionbd/certs/tls.key

extraVolumes: []
# - name: certs
#   secret:
#     secretName: aionbd-tls

extraVolumeMounts: []
# - name: certs
#   mountPath: /etc/aionbd/certs
#   readOnly: true
